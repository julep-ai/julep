<sup>English | [ä¸­æ–‡ç¿»è¯‘](https://github.com/julep-ai/julep/blob/dev/README-CN.md) | [æ—¥æœ¬èªç¿»è¨³](https://github.com/julep-ai/julep/blob/dev/README-JP.md)</sup>

<div align="center">
 <img src="https://socialify.git.ci/julep-ai/julep/image?description=1&descriptionEditable=API%20for%20AI%20agents%20and%20multi-step%20tasks&forks=1&name=1&owner=1&pattern=Solid&stargazers=1&font=Source%20Code%20Pro&logo=https%3A%2F%2Fraw.githubusercontent.com%2Fjulep-ai%2Fjulep%2Fdev%2F.github%2Fjulep-logo.svg&theme=Auto" alt="julep" width="640" height="320" />
</div>

<p align="center">
  <br />
  <a href="https://docs.julep.ai" rel="dofollow"><strong>Explorer les documents</strong></a>
  Â·
  <a href="https://discord.com/invite/JTSBGRZrzj" rel="dofollow">Discorde</a>
  Â·
  <a href="https://x.com/julep_ai" rel="dofollow">ğ•</a>
  Â·
  <a href="https://www.linkedin.com/company/julep-ai" rel="dofollow">LinkedIn</a>
</p>


<p align="center">
    <a href="https://www.npmjs.com/package/@julep/sdk"><img src="https://img.shields.io/npm/v/%40julep%2Fsdk?style=social&amp;logo=npm&amp;link=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F%40julep%2Fsdk" alt="NPM Version"></a>
    <span>&nbsp;</span>
    <a href="https://pypi.org/project/julep"><img src="https://img.shields.io/pypi/v/julep?style=social&amp;logo=python&amp;label=PyPI&amp;link=https%3A%2F%2Fpypi.org%2Fproject%2Fjulep" alt="PyPI - Version"></a>
    <span>&nbsp;</span>
    <a href="https://hub.docker.com/u/julepai"><img src="https://img.shields.io/docker/v/julepai/agents-api?sort=semver&amp;style=social&amp;logo=docker&amp;link=https%3A%2F%2Fhub.docker.com%2Fu%2Fjulepai" alt="Docker Image Version"></a>
    <span>&nbsp;</span>
    <a href="https://choosealicense.com/licenses/apache/"><img src="https://img.shields.io/github/license/julep-ai/julep" alt="GitHub License"></a>
</p>

*****

> [!REMARQUE]
> ğŸ‘¨â€ğŸ’» Vous Ãªtes ici pour l'Ã©vÃ©nement devfest.ai ? Rejoignez notre [Discord](https://discord.com/invite/JTSBGRZrzj) et consultez les dÃ©tails ci-dessous.

<details>
<summary><b>ğŸŒŸ Contributeurs et participants au DevFest.AI</b>(Cliquez pour agrandir)</summary>

## ğŸŒŸ Appel aux contributeurs !

Nous sommes ravis d'accueillir de nouveaux contributeurs au projet Julep ! Nous avons crÃ©Ã© plusieurs Â« bons premiers numÃ©ros Â» pour vous aider Ã  dÃ©marrer. Voici comment vous pouvez contribuer :

1. Consultez notre fichier [CONTRIBUTING.md](https://github.com/julep-ai/julep/blob/dev/CONTRIBUTING.md) pour obtenir des instructions sur la faÃ§on de contribuer.
2. Parcourez nos [bons premiers numÃ©ros](https://github.com/julep-ai/julep/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22) pour trouver une tÃ¢che qui vous intÃ©resse.
3. Si vous avez des questions ou avez besoin d'aide, n'hÃ©sitez pas Ã  nous contacter sur notre chaÃ®ne [Discord](https://discord.com/invite/JTSBGRZrzj).

Vos contributions, grandes ou petites, nous sont prÃ©cieuses. Construisons ensemble quelque chose d'extraordinaire ! ğŸš€

### ğŸ‰ DevFest.AI octobre 2024

Des nouvelles passionnantes ! Nous participons au DevFest.AI tout au long du mois d'octobre 2024 ! ğŸ—“ï¸

- Contribuez Ã  Julep pendant cet Ã©vÃ©nement et obtenez une chance de gagner de superbes produits et cadeaux JulepÂ ! ğŸ
- Rejoignez des dÃ©veloppeurs du monde entier pour contribuer aux rÃ©fÃ©rentiels d'IA et participer Ã  des Ã©vÃ©nements incroyables.
- Un grand merci Ã  DevFest.AI pour l'organisation de cette fantastique initiative !

> [!TIP]
> PrÃªt Ã  vous joindre Ã  la fÃªte ? **[Tweetez que vous participez](https://twitter.com/intent/tweet?text=Pumped%20to%20be%20participating%20in%20%40devfestai%20with%20%40julep_ai%20building%20%23ai%20%20%23agents%20%23workflows%20Let's%20gooo!%20https%3A%2F%2Fgit.new%2Fjulep)** et commenÃ§ons Ã  coder ! ğŸ–¥ï¸

> [!REMARQUE]
> Obtenez votre clÃ© API [ici](https://dashboard-dev.julep.ai).
>
> Pendant que nous sommes en version bÃªta, vous pouvez Ã©galement nous contacter sur [Discord](https://discord.com/invite/JTSBGRZrzj) pour obtenir la levÃ©e des limites de dÃ©bit sur votre clÃ© API.

![Julep DevFest.AI](https://media.giphy.com/media/YjyUeyotft6epaMHtU/giphy.gif)

</details>

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<details>
<summary><h3>ğŸ“– Table of Contents</h3></summary>

- [Introduction](#introduction)
- [Exemple rapide](#exemple-rapide)
- [Principales caractÃ©ristiques](#principales-caract%C3%A9ristiques)
- [Pourquoi Julep vs. LangChainÂ ?](#pourquoi-julep-vs-langchain%C2%A0)
  - [DiffÃ©rents cas d'utilisation](#diff%C3%A9rents-cas-dutilisation)
  - [Facteur de forme diffÃ©rent](#facteur-de-forme-diff%C3%A9rent)
  - [En rÃ©sumÃ©](#en-r%C3%A9sum%C3%A9)
- [Installation](#installation)
- [DÃ©marrage rapide de Python ğŸ](#d%C3%A9marrage-rapide-de-python-)
  - [Ã‰tape 1Â : CrÃ©er un agent](#%C3%89tape-1%C2%A0-cr%C3%A9er-un-agent)
  - [Ã‰tape 2Â : CrÃ©er une tÃ¢che qui gÃ©nÃ¨re une histoire et une bande dessinÃ©e](#%C3%89tape-2%C2%A0-cr%C3%A9er-une-t%C3%A2che-qui-g%C3%A9n%C3%A8re-une-histoire-et-une-bande-dessin%C3%A9e)
  - [Ã‰tape 3Â : ExÃ©cuter la tÃ¢che](#%C3%89tape-3%C2%A0-ex%C3%A9cuter-la-t%C3%A2che)
  - [Ã‰tape 4Â : Discuter avec l'agent](#%C3%89tape-4%C2%A0-discuter-avec-lagent)
- [DÃ©marrage rapide de Node.js ğŸŸ©](#d%C3%A9marrage-rapide-de-nodejs-)
  - [Ã‰tape 1Â : CrÃ©er un agent](#%C3%89tape-1%C2%A0-cr%C3%A9er-un-agent-1)
  - [Ã‰tape 2Â : CrÃ©er une tÃ¢che qui gÃ©nÃ¨re une histoire et une bande dessinÃ©e](#%C3%89tape-2%C2%A0-cr%C3%A9er-une-t%C3%A2che-qui-g%C3%A9n%C3%A8re-une-histoire-et-une-bande-dessin%C3%A9e-1)
  - [Ã‰tape 3Â : ExÃ©cuter la tÃ¢che](#%C3%89tape-3%C2%A0-ex%C3%A9cuter-la-t%C3%A2che-1)
  - [Ã‰tape 4Â : Discuter avec l'agent](#%C3%89tape-4%C2%A0-discuter-avec-lagent-1)
- [Composants](#composants)
  - [ModÃ¨le mental](#mod%C3%A8le-mental)
- [Concepts](#concepts)
- [Comprendre les tÃ¢ches](#comprendre-les-t%C3%A2ches)
  - [Types d'Ã©tapes de flux de travail](#types-d%C3%A9tapes-de-flux-de-travail)
- [Types d'outils](#types-doutils)
  - [Fonctions dÃ©finies par l'utilisateur](#fonctions-d%C3%A9finies-par-lutilisateur)
  - [outils `systÃ¨me`](#outils-syst%C3%A8me)
  - [IntÃ©grations intÃ©grÃ©es](#int%C3%A9grations-int%C3%A9gr%C3%A9es)
  - [Appels directs `api_call`](#appels-directs-api_call)
- [IntÃ©grations](#int%C3%A9grations)
  - [Recherche courageuse](#recherche-courageuse)
  - [Base de navigateur](#base-de-navigateur)
  - [E-mail](#e-mail)
  - [AraignÃ©e](#araign%C3%A9e)
  - [MÃ©tÃ©o](#m%C3%A9t%C3%A9o)
  - [WikipÃ©dia](#wikip%C3%A9dia)
- [Autres fonctionnalitÃ©s](#autres-fonctionnalit%C3%A9s)
  - [Ajout d'outils aux agents](#ajout-doutils-aux-agents)
  - [Gestion des sessions et des utilisateurs](#gestion-des-sessions-et-des-utilisateurs)
  - [IntÃ©gration et recherche de documents](#int%C3%A9gration-et-recherche-de-documents)
- [DÃ©marrage rapide local](#d%C3%A9marrage-rapide-local)
- [RÃ©fÃ©rence du SDK](#r%C3%A9f%C3%A9rence-du-sdk)
- [RÃ©fÃ©rence API](#r%C3%A9f%C3%A9rence-api)

</details>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## Introduction

Julep est une plateforme permettant de crÃ©er des agents IA qui se souviennent des interactions passÃ©es et peuvent effectuer des tÃ¢ches complexes. Elle offre une mÃ©moire Ã  long terme et gÃ¨re des processus en plusieurs Ã©tapes.

Julep permet la crÃ©ation de tÃ¢ches en plusieurs Ã©tapes intÃ©grant la prise de dÃ©cision, les boucles, le traitement parallÃ¨le et l'intÃ©gration avec de nombreux outils et API externes.

Alors que de nombreuses applications dâ€™IA se limitent Ã  des chaÃ®nes simples et linÃ©aires dâ€™invites et dâ€™appels dâ€™API avec une ramification minimale, Julep est conÃ§u pour gÃ©rer des scÃ©narios plus complexes.

Il prend en charge :
- Processus complexes en plusieurs Ã©tapes
- Prise de dÃ©cision dynamique
- ExÃ©cution parallÃ¨le

> [!TIP]
> Imaginez que vous souhaitiez crÃ©er un agent d'IA capable de faire plus que simplement rÃ©pondre Ã  des questions simples : il doit gÃ©rer des tÃ¢ches complexes, se souvenir des interactions passÃ©es et peut-Ãªtre mÃªme utiliser d'autres outils ou API. C'est lÃ  qu'intervient Julep.

## Exemple rapide

Imaginez un agent dâ€™IA de recherche capable dâ€™effectuer les opÃ©rations suivantesÂ :
1. Prenez un sujet,
2. Proposez 100 requÃªtes de recherche pour ce sujet,
3. Effectuez ces recherches sur le Web en parallÃ¨le,
4. RÃ©sumez les rÃ©sultats,
5. Envoyez le rÃ©sumÃ© sur Discord

Dans Julep, ce serait une tÃ¢che unique sous<b>80 lignes de code</b>et courir<b>entiÃ¨rement gÃ©rÃ©</b>tout seul. Toutes les Ã©tapes sont exÃ©cutÃ©es sur les propres serveurs de Julep et vous n'avez pas besoin de lever le petit doigt. Voici un exemple fonctionnelÂ :

```yaml
name: Research Agent

# Optional: Define the input schema for the task
input_schema:
  type: object
  properties:
    topic:
      type: string
      description: The main topic to research

# Define the tools that the agent can use
tools:
- name: web_search
  type: integration
  integration:
    provider: brave
    setup:
      api_key: "YOUR_BRAVE_API_KEY"

- name: discord_webhook
  type: api_call
  api_call:
    url: "YOUR_DISCORD_WEBHOOK_URL"
    method: POST
    headers:
      Content-Type: application/json

# Special variables:
# - inputs: for accessing the input to the task
# - outputs: for accessing the output of previous steps
# - _: for accessing the output of the previous step

# Define the main workflow
main:
- prompt:
    - role: system
      content: >-
        You are a research assistant.
        Generate 100 diverse search queries related to the topic:
        {{inputs[0].topic}}

        Write one query per line.
  unwrap: true

# Evaluate the search queries using a simple python expression
- evaluate:
    search_queries: "_.split('\n')"

# Run the web search in parallel for each query
- over: "_.search_queries"
  map:
    tool: web_search
    arguments:
      query: "_"
  parallelism: 100

# Collect the results from the web search
- evaluate:
    results: "'\n'.join([item.result for item in _])"

# Summarize the results
- prompt:
    - role: system
      content: >
        You are a research summarizer. Create a comprehensive summary of the following research results on the topic {{inputs[0].topic}}.
        The summary should be well-structured, informative, and highlight key findings and insights:
        {{_.results}}
  unwrap: true

# Send the summary to Discord
- tool: discord_webhook
  arguments:
    content: >
      **Research Summary for {{inputs[0].topic}}**

      {{_}}
```

> [!TIP]
> Julep est vraiment utile lorsque vous souhaitez crÃ©er des agents IA capables de conserver le contexte et l'Ã©tat lors d'interactions Ã  long terme. Il est idÃ©al pour concevoir des flux de travail complexes en plusieurs Ã©tapes et pour intÃ©grer divers outils et API directement dans les processus de votre agent.
>
> Dans cet exemple, Julep gÃ©rera automatiquement les exÃ©cutions parallÃ¨les, rÃ©essayera les Ã©tapes ayant Ã©chouÃ©, renverra les requÃªtes API et maintiendra les tÃ¢ches en cours d'exÃ©cution de maniÃ¨re fiable jusqu'Ã  leur achÃ¨vement.

## Principales caractÃ©ristiques

1. ğŸ§  **Agents IA persistants** : mÃ©morisent le contexte et les informations au cours d'interactions Ã  long terme.
2. ğŸ’¾ **Sessions avec Ã©tat** : gardez une trace des interactions passÃ©es pour des rÃ©ponses personnalisÃ©es.
3. ğŸ”„ **TÃ¢ches en plusieurs Ã©tapes** : crÃ©ez des processus complexes en plusieurs Ã©tapes avec des boucles et une prise de dÃ©cision.
4. â³ **Gestion des tÃ¢ches** : gÃ©rez les tÃ¢ches de longue durÃ©e qui peuvent s'exÃ©cuter indÃ©finiment.
5. ğŸ› ï¸ **Outils intÃ©grÃ©s**Â : utilisez des outils intÃ©grÃ©s et des API externes dans vos tÃ¢ches.
6. ğŸ”§ **Auto-rÃ©paration** : Julep rÃ©essaiera automatiquement les Ã©tapes ayant Ã©chouÃ©, renverra les messages et assurera gÃ©nÃ©ralement le bon dÃ©roulement de vos tÃ¢ches.
7. ğŸ“š **RAG** â€‹â€‹: Utilisez le magasin de documents de Julep pour crÃ©er un systÃ¨me permettant de rÃ©cupÃ©rer et d'utiliser vos propres donnÃ©es.

Julep est idÃ©al pour les applications qui nÃ©cessitent des cas dâ€™utilisation de lâ€™IA au-delÃ  des simples modÃ¨les de rÃ©ponse rapide.

## Pourquoi Julep vs. LangChainÂ ?

### DiffÃ©rents cas d'utilisation

ConsidÃ©rez LangChain et Julep comme des outils avec des objectifs diffÃ©rents au sein de la pile de dÃ©veloppement de lâ€™IA.

LangChain est idÃ©al pour crÃ©er des sÃ©quences d'invites et gÃ©rer les interactions avec les modÃ¨les d'IA. Il dispose d'un vaste Ã©cosystÃ¨me avec de nombreuses intÃ©grations prÃ©dÃ©finies, ce qui le rend pratique si vous souhaitez mettre en place quelque chose rapidement. LangChain s'adapte bien aux cas d'utilisation simples qui impliquent une chaÃ®ne linÃ©aire d'invites et d'appels d'API.

Julep, en revanche, s'intÃ©resse davantage Ã  la crÃ©ation d'agents d'IA persistants capables de mÃ©moriser des Ã©lÃ©ments au cours d'interactions Ã  long terme. Il est particuliÃ¨rement efficace lorsque vous avez besoin de tÃ¢ches complexes impliquant plusieurs Ã©tapes, une prise de dÃ©cision et une intÃ©gration avec divers outils ou API directement dans le processus de l'agent. Il est conÃ§u dÃ¨s le dÃ©part pour gÃ©rer les sessions persistantes et les tÃ¢ches complexes.

Utilisez Julep si vous imaginez crÃ©er un assistant IA complexe qui doitÂ :

- Suivez les interactions des utilisateurs sur plusieurs jours ou semaines.
- ExÃ©cutez des tÃ¢ches planifiÃ©es, comme l'envoi de rÃ©sumÃ©s quotidiens ou la surveillance de sources de donnÃ©es.
- Prendre des dÃ©cisions basÃ©es sur des interactions antÃ©rieures ou des donnÃ©es stockÃ©es.
- Interagir avec plusieurs services externes dans le cadre de sa mission.

Ensuite, Julep fournit lâ€™infrastructure pour prendre en charge tout cela sans que vous ayez Ã  le construire Ã  partir de zÃ©ro.

### Facteur de forme diffÃ©rent

Julep est une **plateforme** qui comprend un langage pour dÃ©crire les tÃ¢ches, un serveur pour exÃ©cuter ces tÃ¢ches et un SDK pour interagir avec la plateforme. Pour crÃ©er quelque chose avec Julep, vous Ã©crivez une description de la tÃ¢che en YAML, puis vous exÃ©cutez la tÃ¢che dans le cloud.

Julep est conÃ§u pour les tÃ¢ches lourdes, en plusieurs Ã©tapes et de longue durÃ©e, et il n'y a aucune limite Ã  la complexitÃ© de la tÃ¢che.

LangChain est une **bibliothÃ¨que** qui inclut quelques outils et un framework pour crÃ©er des chaÃ®nes linÃ©aires d'invites et d'outils. Pour crÃ©er quelque chose avec LangChain, vous Ã©crivez gÃ©nÃ©ralement du code Python qui configure et exÃ©cute les chaÃ®nes de modÃ¨les que vous souhaitez utiliser.

LangChain pourrait Ãªtre suffisant et plus rapide Ã  mettre en Å“uvre pour les cas d'utilisation simples impliquant une chaÃ®ne linÃ©aire d'invites et d'appels d'API.

### En rÃ©sumÃ©

Utilisez LangChain lorsque vous devez gÃ©rer les interactions des modÃ¨les dâ€™IA et les sÃ©quences dâ€™invite dans un contexte sans Ã©tat ou Ã  court terme.

Choisissez Julep lorsque vous avez besoin d'un framework robuste pour les agents avec Ã©tat avec des capacitÃ©s de tÃ¢ches avancÃ©es, des sessions persistantes et une gestion de tÃ¢ches complexes.

## Installation

Pour commencer Ã  utiliser Julep, installez-le en utilisant [npm](https://www.npmjs.com/package/@julep/sdk) ou [pip](https://pypi.org/project/julep/)Â :

```bash
npm install @julep/sdk
```

ou

```bash
pip install julep
```

> [!REMARQUE]
> Obtenez votre clÃ© API [ici](https://dashboard-dev.julep.ai).
>
> Pendant que nous sommes en version bÃªta, vous pouvez Ã©galement nous contacter sur [Discord](https://discord.com/invite/JTSBGRZrzj) pour obtenir la levÃ©e des limites de dÃ©bit sur votre clÃ© API.

> [!TIP]
> ğŸ’» ÃŠtes-vous du genre Ã  vouloir _montrer le codeÂ !â„¢_Â ? Nous avons crÃ©Ã© une multitude de livres de recettes pour vous aider Ã  dÃ©marrer. **Consultez les [livres de recettes](https://github.com/julep-ai/julep/tree/dev/cookbooks)** pour parcourir les exemples.
>
> ğŸ’¡ Il existe Ã©galement de nombreuses idÃ©es que vous pouvez dÃ©velopper en plus de Julep. **Consultez la [liste d'idÃ©es](https://github.com/julep-ai/julep/tree/dev/cookbooks/IDEAS.md)** pour vous inspirer.

## DÃ©marrage rapide de Python ğŸ

### Ã‰tape 1Â : CrÃ©er un agent

```python
import yaml
from julep import Julep # or AsyncJulep

client = Julep(api_key="your_julep_api_key")

agent = client.agents.create(
    name="Storytelling Agent",
    model="gpt-4o",
    about="You are a creative storytelling agent that can craft engaging stories and generate comic panels based on ideas.",
)

# ğŸ› ï¸ Add an image generation tool (DALLÂ·E) to the agent
client.agents.tools.create(
    agent_id=agent.id,
    name="image_generator",
    description="Use this tool to generate images based on descriptions.",
    integration={
        "provider": "dalle",
        "method": "generate_image",
        "setup": {
            "api_key": "your_openai_api_key",
        },
    },
)
```

### Ã‰tape 2Â : CrÃ©er une tÃ¢che qui gÃ©nÃ¨re une histoire et une bande dessinÃ©e

DÃ©finissons une tÃ¢che en plusieurs Ã©tapes pour crÃ©er une histoire et gÃ©nÃ©rer une bande dessinÃ©e Ã  panneaux basÃ©e sur une idÃ©e d'entrÃ©eÂ :

```python
# ğŸ“‹ Task
# Create a task that takes an idea and creates a story and a 4-panel comic strip
task_yaml = """
name: Story and Comic Creator
description: Create a story based on an idea and generate a 4-panel comic strip illustrating the story.

main:
  # Step 1: Generate a story and outline into 4 panels
  - prompt:
      - role: system
        content: You are {{agent.name}}. {{agent.about}}
      - role: user
        content: >
          Based on the idea '{{_.idea}}', write a short story suitable for a 4-panel comic strip.
          Provide the story and a numbered list of 4 brief descriptions for each panel illustrating key moments in the story.
    unwrap: true

  # Step 2: Extract the panel descriptions and story
  - evaluate:
      story: _.split('1. ')[0].strip()
      panels: re.findall(r'\\d+\\.\\s*(.*?)(?=\\d+\\.\\s*|$)', _)

  # Step 3: Generate images for each panel using the image generator tool
  - foreach:
      in: _.panels
      do:
        tool: image_generator
        arguments:
          description: _

  # Step 4: Generate a catchy title for the story
  - prompt:
      - role: system
        content: You are {{agent.name}}. {{agent.about}}
      - role: user
        content: >
          Based on the story below, generate a catchy title.

          Story: {{outputs[1].story}}
    unwrap: true

  # Step 5: Return the story, the generated images, and the title
  - return:
      title: outputs[3]
      story: outputs[1].story
      comic_panels: "[output.image.url for output in outputs[2]]"
"""

task = client.tasks.create(
    agent_id=agent.id,
    **yaml.safe_load(task_yaml)
)
```

### Ã‰tape 3Â : ExÃ©cuter la tÃ¢che

```python
# ğŸš€ Execute the task with an input idea
execution = client.executions.create(
    task_id=task.id,
    input={"idea": "A cat who learns to fly"}
)

# ğŸ‰ Watch as the story and comic panels are generated
for transition in client.executions.transitions.stream(execution_id=execution.id):
    print(transition)

# ğŸ“¦ Once the execution is finished, retrieve the results
result = client.executions.get(execution_id=execution.id)
```

### Ã‰tape 4Â : Discuter avec l'agent

DÃ©marrez une session de chat interactive avec l'agentÂ :

```python
session = client.sessions.create(agent_id=agent.id)

# ğŸ’¬ Send messages to the agent
while (message := input("Enter a message: ")) != "quit":
    response = client.sessions.chat(
        session_id=session.id,
        message=message,
    )

    print(response)
```

> [!TIP]
> Vous pouvez trouver l'exemple Python complet [ici](example.py).


## DÃ©marrage rapide de Node.js ğŸŸ©

### Ã‰tape 1Â : CrÃ©er un agent

```javascript
import { Julep } from '@julep/sdk';
import yaml from 'js-yaml';

const client = new Julep({ apiKey: 'your_julep_api_key' });

async function createAgent() {
  const agent = await client.agents.create({
    name: "Storytelling Agent",
    model: "gpt-4",
    about: "You are a creative storytelling agent that can craft engaging stories and generate comic panels based on ideas.",
  });

  // ğŸ› ï¸ Add an image generation tool (DALLÂ·E) to the agent
  await client.agents.tools.create(agent.id, {
    name: "image_generator",
    description: "Use this tool to generate images based on descriptions.",
    integration: {
      provider: "dalle",
      method: "generate_image",
      setup: {
        api_key: "your_openai_api_key",
      },
    },
  });

  return agent;
}
```

### Ã‰tape 2Â : CrÃ©er une tÃ¢che qui gÃ©nÃ¨re une histoire et une bande dessinÃ©e

```javascript
const taskYaml = `
name: Story and Comic Creator
description: Create a story based on an idea and generate a 4-panel comic strip illustrating the story.

main:
  # Step 1: Generate a story and outline into 4 panels
  - prompt:
      - role: system
        content: You are {{agent.name}}. {{agent.about}}
      - role: user
        content: >
          Based on the idea '{{_.idea}}', write a short story suitable for a 4-panel comic strip.
          Provide the story and a numbered list of 4 brief descriptions for each panel illustrating key moments in the story.
    unwrap: true

  # Step 2: Extract the panel descriptions and story
  - evaluate:
      story: _.split('1. ')[0].trim()
      panels: _.match(/\\d+\\.\\s*(.*?)(?=\\d+\\.\\s*|$)/g)

  # Step 3: Generate images for each panel using the image generator tool
  - foreach:
      in: _.panels
      do:
        tool: image_generator
        arguments:
          description: _

  # Step 4: Generate a catchy title for the story
  - prompt:
      - role: system
        content: You are {{agent.name}}. {{agent.about}}
      - role: user
        content: >
          Based on the story below, generate a catchy title.

          Story: {{outputs[1].story}}
    unwrap: true

  # Step 5: Return the story, the generated images, and the title
  - return:
      title: outputs[3]
      story: outputs[1].story
      comic_panels: outputs[2].map(output => output.image.url)
`;

async function createTask(agent) {
  const task = await client.tasks.create(agent.id, yaml.load(taskYaml));
  return task;
}
```

### Ã‰tape 3Â : ExÃ©cuter la tÃ¢che

```javascript
async function executeTask(task) {
  const execution = await client.executions.create(task.id, {
    input: { idea: "A cat who learns to fly" }
  });

  // ğŸ‰ Watch as the story and comic panels are generated
  for await (const transition of client.executions.transitions.stream(execution.id)) {
    console.log(transition);
  }

  // ğŸ“¦ Once the execution is finished, retrieve the results
  const result = await client.executions.get(execution.id);
  return result;
}
```

### Ã‰tape 4Â : Discuter avec l'agent

```javascript
async function chatWithAgent(agent) {
  const session = await client.sessions.create({ agent_id: agent.id });

  // ğŸ’¬ Send messages to the agent
  const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
  });

  const chat = async () => {
    rl.question("Enter a message (or 'quit' to exit): ", async (message) => {
      if (message.toLowerCase() === 'quit') {
        rl.close();
        return;
      }

      const response = await client.sessions.chat(session.id, { message });
      console.log(response);
      chat();
    });
  };

  chat();
}

// Run the example
async function runExample() {
  const agent = await createAgent();
  const task = await createTask(agent);
  const result = await executeTask(task);
  console.log("Task Result:", result);
  await chatWithAgent(agent);
}

runExample().catch(console.error);
```

> [!TIP]
> Vous pouvez trouver l'exemple complet de Node.js [ici](example.js).

## Composants

Julep est composÃ© des Ã©lÃ©ments suivants :

- **Plateforme Julep**Â : la plateforme Julep est un service cloud qui exÃ©cute vos workflows. Elle comprend un langage pour dÃ©crire les workflows, un serveur pour exÃ©cuter ces workflows et un SDK pour interagir avec la plateforme.
- **SDK Julep**Â : les SDK Julep sont un ensemble de bibliothÃ¨ques permettant de crÃ©er des workflows. Il existe des SDK pour Python et JavaScript, et d'autres sont en cours de dÃ©veloppement.
- **API Julep** : L'API Julep est une API RESTful que vous pouvez utiliser pour interagir avec la plateforme Julep.

### ModÃ¨le mental

<div align="center">
  <img src="https://github.com/user-attachments/assets/38420b5d-9342-4c8d-bae9-b47c28ae45af" height="360" />
</div>

ConsidÃ©rez Julep comme une plateforme qui combine des composants cÃ´tÃ© client et cÃ´tÃ© serveur pour vous aider Ã  crÃ©er des agents d'IA avancÃ©s. Voici comment le visualiserÂ :

1. **Votre code d'applicationÂ :**
- Vous utilisez le SDK Julep dans votre application pour dÃ©finir des agents, des tÃ¢ches et des workflows.
- Le SDK fournit des fonctions et des classes qui facilitent la configuration et la gestion de ces composants.

2. **Service back-end JulepÂ :**
- Le SDK communique avec le backend Julep via le rÃ©seau.
- Le backend gÃ¨re l'exÃ©cution des tÃ¢ches, maintient l'Ã©tat de la session, stocke les documents et orchestre les flux de travail.

3. **IntÃ©gration avec les outils et les APIÂ :**
- Au sein de vos workflows, vous pouvez intÃ©grer des outils et services externes.
- Le backend facilite ces intÃ©grations, afin que vos agents puissent, par exemple, effectuer des recherches sur le Web, accÃ©der Ã  des bases de donnÃ©es ou appeler des API tierces.

En termes plus simples :
- Julep est une plateforme permettant de crÃ©er des agents d'IA avec Ã©tat.
- Vous utilisez le SDK (comme une boÃ®te Ã  outils) dans votre code pour dÃ©finir ce que font vos agents.
- Le service backend (que vous pouvez considÃ©rer comme le moteur) exÃ©cute ces dÃ©finitions, gÃ¨re l'Ã©tat et gÃ¨re la complexitÃ©.

## Concepts

Julep s'appuie sur plusieurs composants techniques clÃ©s qui fonctionnent ensemble pour crÃ©er de puissants flux de travail d'IAÂ :

```mermaid
graph TD
    User[User] ==> Session[Session]
    Session --> Agent[Agent]
    Agent --> Tasks[Tasks]
    Agent --> LLM[Large Language Model]
    Tasks --> Tools[Tools]
    Agent --> Documents[Documents]
    Documents --> VectorDB[Vector Database]
    Tasks --> Executions[Executions]

    classDef client fill:#9ff,stroke:#333,stroke-width:1px;
    class User client;

    classDef core fill:#f9f,stroke:#333,stroke-width:2px;
    class Agent,Tasks,Session core;
```

- **Agents** : entitÃ©s alimentÃ©es par l'IA et soutenues par de grands modÃ¨les linguistiques (LLM) qui exÃ©cutent des tÃ¢ches et interagissent avec les utilisateurs.
- **Utilisateurs**Â : entitÃ©s qui interagissent avec les agents via des sessions.
- **Sessions**Â : interactions avec Ã©tat entre agents et utilisateurs, maintenant le contexte sur plusieurs Ã©changes.
- **TÃ¢ches**Â : flux de travail programmatiques en plusieurs Ã©tapes que les agents peuvent exÃ©cuter, y compris diffÃ©rents types d'Ã©tapes telles que des invites, des appels d'outils et une logique conditionnelle.
- **Outils**Â : intÃ©grations qui Ã©tendent les capacitÃ©s d'un agent, y compris les fonctions dÃ©finies par l'utilisateur, les outils systÃ¨me ou les intÃ©grations d'API tierces.
- **Documents** : Objets textes ou donnÃ©es associÃ©s Ã  des agents ou utilisateurs, vectorisÃ©s et stockÃ©s pour la recherche et la rÃ©cupÃ©ration sÃ©mantiques.
- **ExÃ©cutions**Â : instances de tÃ¢ches qui ont Ã©tÃ© initiÃ©es avec des entrÃ©es spÃ©cifiques, avec leur propre cycle de vie et leur propre machine d'Ã©tat.

Pour une explication plus dÃ©taillÃ©e de ces concepts et de leurs interactions, veuillez vous rÃ©fÃ©rer Ã  notre [Documentation sur les concepts](https://github.com/julep-ai/julep/blob/dev/docs/julep-concepts.md).

## Comprendre les tÃ¢ches

Les tÃ¢ches sont au cÅ“ur du systÃ¨me de workflow de Julep. Elles vous permettent de dÃ©finir des workflows IA complexes en plusieurs Ã©tapes que vos agents peuvent exÃ©cuter. Voici un bref aperÃ§u des composants des tÃ¢chesÂ :

- **Nom et description** : Chaque tÃ¢che a un nom et une description uniques pour une identification facile.
- **Ã‰tapes principales** : Le cÅ“ur dâ€™une tÃ¢che, dÃ©finissant la sÃ©quence dâ€™actions Ã  effectuer.
- **Outils**Â : intÃ©grations facultatives qui Ã©tendent les capacitÃ©s de votre agent pendant l'exÃ©cution des tÃ¢ches.

### Types d'Ã©tapes de flux de travail

Les tÃ¢ches dans Julep peuvent inclure diffÃ©rents types d'Ã©tapes, ce qui vous permet de crÃ©er des flux de travail complexes et puissants. Voici un aperÃ§u des types d'Ã©tapes disponibles, organisÃ©s par catÃ©gorieÂ :

#### Ã‰tapes courantes

1. **Invite**Â : envoyez un message au modÃ¨le dâ€™IA et recevez une rÃ©ponse.
   ```yaml
   - prompt: "Analyze the following data: {{data}}"
   ```

2. **Appel d'outil** : ExÃ©cutez un outil ou une API intÃ©grÃ©e.
   ```yaml
   - tool: web_search
     arguments:
       query: "Latest AI developments"
   ```

3. **Ã‰valuer** : Effectuer des calculs ou manipuler des donnÃ©es.
   ```yaml
   - evaluate:
       average_score: "sum(scores) / len(scores)"
   ```

4. **Attendre l'entrÃ©e**Â : mettre le flux de travail en pause jusqu'Ã  ce que l'entrÃ©e soit reÃ§ue.
   ```yaml
   - wait_for_input:
       info:
         message: "Please provide additional information."
   ```

5. **Journal**Â :Â Enregistrer une valeur ou un message spÃ©cifiÃ©.
   ```yaml
   - log: "Processing completed for item {{item_id}}"
   ```

#### Ã‰tapes clÃ©-valeur

6. **Get**Â : rÃ©cupÃ©rer une valeur Ã  partir d'un magasin clÃ©-valeur.
   ```yaml
   - get: "user_preference"
   ```

7. **Set**Â : attribuez une valeur Ã  une clÃ© dans un magasin clÃ©-valeur.
   ```yaml
   - set:
       user_preference: "dark_mode"
   ```

#### Ã‰tapes d'itÃ©ration

8. **Foreach**Â : itÃ©rer sur une collection et effectuer des Ã©tapes pour chaque Ã©lÃ©ment.
   ```yaml
   - foreach:
       in: "data_list"
       do:
         - log: "Processing item {{_}}"
   ```

9. **Map-Reduce** : Cartographiez une collection et rÃ©duisez les rÃ©sultats.
   ```yaml
   - map_reduce:
       over: "numbers"
       map:
         - evaluate:
             squared: "_ ** 2"
       reduce: "sum(results)"
   ```

10. **ParallÃ¨le**Â : exÃ©cuter plusieurs Ã©tapes en parallÃ¨le.
    ```yaml
    - parallel:
        - tool: web_search
          arguments:
            query: "AI news"
        - tool: weather_check
          arguments:
            location: "New York"
    ```

#### Ã‰tapes conditionnelles

11. **If-Else** : ExÃ©cution conditionnelle des Ã©tapes.
    ```yaml
    - if: "score > 0.8"
      then:
        - log: "High score achieved"
      else:
        - log: "Score needs improvement"
    ```

12. **Switch**Â : exÃ©cuter des Ã©tapes en fonction de plusieurs conditions.
    ```yaml
    - switch:
        - case: "category == 'A'"
          then:
            - log: "Category A processing"
        - case: "category == 'B'"
          then:
            - log: "Category B processing"
        - case: "_"  # Default case
          then:
            - log: "Unknown category"
    ```

#### Autre flux de contrÃ´le

13. **Veille**Â : met le flux de travail en pause pendant une durÃ©e spÃ©cifiÃ©e.
    ```yaml
    - sleep:
        seconds: 30
    ```

14. **Retour**Â : renvoie une valeur du flux de travail.
    ```yaml
    - return:
        result: "Task completed successfully"
    ```

15. **Rendement**Â : ExÃ©cutez un sous-flux de travail et attendez sa fin.
    ```yaml
    - yield:
        workflow: "data_processing_subflow"
        arguments:
          input_data: "{{raw_data}}"
    ```

16. **Erreur**Â : gÃ©rez les erreurs en spÃ©cifiant un message dâ€™erreur.
    ```yaml
    - error: "Invalid input provided"
    ```

Chaque type d'Ã©tape remplit un objectif spÃ©cifique dans la crÃ©ation de workflows d'IA sophistiquÃ©s. Cette catÃ©gorisation permet de comprendre les diffÃ©rents flux de contrÃ´le et opÃ©rations disponibles dans les tÃ¢ches Julep.


## Types d'outils

Les agents peuvent avoir accÃ¨s Ã  un certain nombre d'Â« outils Â» : toute interface de programmation qu'un modÃ¨le de base peut Â« appeler Â» avec un ensemble d'entrÃ©es pour atteindre un objectif. Par exemple, il peut utiliser un outil Â« web_search(query) Â» pour rechercher des informations sur Internet.

Contrairement aux frameworks d'agents, Julep est un backend qui gÃ¨re l'exÃ©cution des agents. Les clients peuvent interagir avec les agents Ã  l'aide de nos SDK. Julep s'occupe de l'exÃ©cution des tÃ¢ches et de l'exÃ©cution des intÃ©grations.

Les outils du julep peuvent Ãªtre lâ€™un des suivantsÂ :

### Fonctions dÃ©finies par l'utilisateur

Il s'agit de signatures de fonctions que vous pouvez attribuer au modÃ¨le pour qu'il puisse choisir, de la mÃªme maniÃ¨re que fonctionne l'appel de fonctions d'[openai]. Un exemple :

```yaml    
    name: Example system tool task
    description: List agents using system call

    tools:
    - name: send_notification
      description: Send a notification to the user
      type: function
      function:
        parameters:
          type: object
          properties:
            text:
              type: string
              description: Content of the notification

    main:
    - tool: send_notification
      arguments:
        content: hi
```
  
Chaque fois que julep rencontre une _fonction dÃ©finie par l'utilisateur_, il s'arrÃªte, rend le contrÃ´le au client et attend que le client exÃ©cute l'appel de fonction et renvoie les rÃ©sultats Ã  julep.

> [!TIP]
> **Exemple de livre de recettes**Â : [cookbooks/13-Error_Handling_and_Recovery.py](https://github.com/julep-ai/julep/blob/dev/cookbooks/13-Error_Handling_and_Recovery.py)

### outils `systÃ¨me`
Outils intÃ©grÃ©s qui peuvent Ãªtre utilisÃ©s pour appeler les API julep elles-mÃªmes, comme dÃ©clencher l'exÃ©cution d'une tÃ¢che, ajouter Ã  un champ de mÃ©tadonnÃ©es, etc.
Les outils Â«Â systÃ¨meÂ Â» sont intÃ©grÃ©s au backend. Ils sont exÃ©cutÃ©s automatiquement lorsque cela est nÃ©cessaire. Ils ne nÃ©cessitent aucune action du cÃ´tÃ© client.
 
Par exemple,
  
  ```yaml
    name: Example system tool task
    description: List agents using system call

    tools:
    - name: list_agents
      description: List all agents
      type: system
      system:
        resource: agent
        operation: list
    main:
    - tool: list_agents
      arguments:
        limit: 10
  ```

> [!TIP]
> **Exemple de livre de recettes**Â : [cookbooks/10-Document_Management_and_Search.py](https://github.com/julep-ai/julep/blob/dev/cookbooks/10-Document_Management_and_Search.py)
 
### IntÃ©grations intÃ©grÃ©es
Julep est livrÃ© avec un certain nombre d'intÃ©grations intÃ©grÃ©es (comme dÃ©crit dans la section ci-dessous). Les outils Â« d'intÃ©gration Â» sont directement exÃ©cutÃ©s sur le backend de Julep. Tous les paramÃ¨tres supplÃ©mentaires dont ils ont besoin au moment de l'exÃ©cution peuvent Ãªtre dÃ©finis dans les champs Â« mÃ©tadonnÃ©es Â» de l'agent/session/utilisateur.

> [!TIP]
> **Exemple de livre de recettes**Â : [cookbooks/01-Website_Crawler_using_Spider.ipynb](https://github.com/julep-ai/julep/blob/dev/cookbooks/01-Website_Crawler_using_Spider.ipynb)

Le backend Julep est livrÃ© avec des outils tiers intÃ©grÃ©s provenant des fournisseurs suivantsÂ :
- [composio](https://composio.dev) \*\*
- [anonyme](https://anon.com) \*\*
- [kits d'outils langchain](https://python.langchain.com/v0.2/docs/integrations/toolkits/). La prise en charge des kits d'outils _Github, Gitlab, Gmail, Jira, MultiOn, Slack_ est prÃ©vue.

\*\* Ã‰tant donnÃ© que _composio_ et _anon_ sont des fournisseurs tiers, leurs outils nÃ©cessitent la configuration d'une liaison de compte.


### Appels directs `api_call`

julep peut Ã©galement effectuer directement des appels d'API lors des exÃ©cutions de workflows sous forme d'appels d'outils. Comme pour `integration`, des paramÃ¨tres d'exÃ©cution supplÃ©mentaires sont chargÃ©s Ã  partir des champs `metadata`.
  
Par exemple,
  
  ```yaml
    name: Example api_call task
    tools:
    - type: api_call
      name: hello
      api_call:
        method: GET
        url: https://httpbin.org/get
    main:
    - tool: hello
      arguments:
        params:
          test: _.input
  ```

## IntÃ©grations

Julep prend en charge diverses intÃ©grations qui Ã©tendent les capacitÃ©s de vos agents IA. Voici une liste des intÃ©grations disponibles et de leurs arguments pris en chargeÂ :

### Recherche courageuse

```yaml
setup:
  api_key: string  # The API key for Brave Search

arguments:
  query: string  # The search query for searching with Brave

output:
  result: string  # The result of the Brave Search
```

> [!TIP]
> **Exemple de livre de recettes** : [cookbooks/03-SmartResearcher_With_WebSearch.ipynb](https://github.com/julep-ai/julep/blob/dev/cookbooks/03-SmartResearcher_With_WebSearch.ipynb)

### Base de navigateur

```yaml
setup:
  api_key: string       # The API key for BrowserBase
  project_id: string    # The project ID for BrowserBase
  session_id: string    # (Optional) The session ID for BrowserBase

arguments:
  urls: list[string]    # The URLs for loading with BrowserBase

output:
  documents: list       # The documents loaded from the URLs
```

### E-mail

```yaml
setup:
  host: string      # The host of the email server
  port: integer     # The port of the email server
  user: string      # The username of the email server
  password: string  # The password of the email server

arguments:
  to: string        # The email address to send the email to
  from: string      # The email address to send the email from
  subject: string   # The subject of the email
  body: string      # The body of the email

output:
  success: boolean  # Whether the email was sent successfully
```

> [!TIP]
> **Exemple de livre de recettes**Â : [cookbooks/00-Devfest-Email-Assistant.ipynb](https://github.com/julep-ai/julep/blob/dev/cookbooks/00-Devfest-Email-Assistant.ipynb)

### AraignÃ©e

```yaml
setup:
  spider_api_key: string  # The API key for Spider

arguments:
  url: string             # The URL for which to fetch data
  mode: string            # The type of crawlers (default: "scrape")
  params: dict            # (Optional) The parameters for the Spider API

output:
  documents: list         # The documents returned from the spider
```

> [!TIP]
> **Exemple de livre de recettes**Â : [cookbooks/01-Website_Crawler_using_Spider.ipynb](https://github.com/julep-ai/julep/blob/dev/cookbooks/01-Website_Crawler_using_Spider.ipynb)

### MÃ©tÃ©o

```yaml
setup:
  openweathermap_api_key: string  # The API key for OpenWeatherMap

arguments:
  location: string                # The location for which to fetch weather data

output:
  result: string                  # The weather data for the specified location
```

> [!TIP]
> **Exemple de livre de recettes** : [cookbooks/04-TripPlanner_With_Weather_And_WikiInfo.ipynb](https://github.com/julep-ai/julep/blob/dev/cookbooks/04-TripPlanner_With_Weather_And_WikiInfo.ipynb)

### WikipÃ©dia

```yaml
arguments:
  query: string           # The search query string
  load_max_docs: integer  # Maximum number of documents to load (default: 2)

output:
  documents: list         # The documents returned from the Wikipedia search
```

> [!TIP]
> **Exemple de livre de recettes** : [cookbooks/04-TripPlanner_With_Weather_And_WikiInfo.ipynb](https://github.com/julep-ai/julep/blob/dev/cookbooks/04-TripPlanner_With_Weather_And_WikiInfo.ipynb)

Ces intÃ©grations peuvent Ãªtre utilisÃ©es dans vos tÃ¢ches pour Ã©tendre les capacitÃ©s de vos agents IA. Pour des informations plus dÃ©taillÃ©es sur la maniÃ¨re d'utiliser ces intÃ©grations dans vos workflows, veuillez consulter notre [Documentation sur les intÃ©grations](https://docs.julep.ai/integrations).

## Autres fonctionnalitÃ©s

Julep propose une gamme de fonctionnalitÃ©s avancÃ©es pour amÃ©liorer vos flux de travail d'IAÂ :

### Ajout d'outils aux agents

Ã‰tendez les capacitÃ©s de votre agent en intÃ©grant des outils et des API externesÂ :

```python
client.agents.tools.create(
    agent_id=agent.id,
    name="web_search",
    description="Search the web for information.",
    integration={
        "provider": "brave",
        "method": "search",
        "setup": {"api_key": "your_brave_api_key"},
    },
)
```

### Gestion des sessions et des utilisateurs

Julep fournit une gestion de session robuste pour les interactions persistantesÂ :

```python
session = client.sessions.create(
    agent_id=agent.id,
    user_id=user.id,
    context_overflow="adaptive"
)

# Continue conversation in the same session
response = client.sessions.chat(
    session_id=session.id,
    messages=[
      {
        "role": "user",
        "content": "Follow up on the previous conversation."
      }
    ]
)
```

### IntÃ©gration et recherche de documents

GÃ©rez et recherchez facilement des documents pour vos agents :

```python
# Upload a document
document = client.agents.docs.create(
    title="AI advancements",
    content="AI is changing the world...",
    metadata={"category": "research_paper"}
)

# Search documents
results = client.agents.docs.search(
    text="AI advancements",
    metadata_filter={"category": "research_paper"}
)
```

## DÃ©marrage rapide local

**Exigences**:
- dernier docker compose installÃ©

**Mesures**:
1. `git clone https://github.com/julep-ai/julep.git`
2. `cd julep`
3. `docker volume create cozo_backup`
4. `docker volume create cozo_data`
5. `cp .env.example .env # <-- Modifier ce fichier`
6. `docker compose --env-file .env --profile temporal-ui --profile single-tenant --profile self-hosted-db up --build`

## RÃ©fÃ©rence du SDK

- [Kit de dÃ©veloppement logiciel Node.js](https://github.com/julep-ai/node-sdk/blob/main/api.md)
- [SDK Python](https://github.com/julep-ai/python-sdk/blob/main/api.md)

## RÃ©fÃ©rence API

Explorez notre documentation API complÃ¨te pour en savoir plus sur les agents, les tÃ¢ches et les exÃ©cutionsÂ :

- [API des agents](https://api.julep.ai/api/docs#tag/agents)
- [API des tÃ¢ches](https://api.julep.ai/api/docs#tag/tasks)
- [API d'exÃ©cution](https://api.julep.ai/api/docs#tag/executions)
