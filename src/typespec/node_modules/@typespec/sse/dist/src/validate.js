import { isEvents } from "@typespec/events";
import { reportDiagnostic, SSEStateKeys } from "./lib.js";
export function $onValidate(program) {
    checkForIncorrectlyAssignedTerminalEvents(program);
}
function checkForIncorrectlyAssignedTerminalEvents(program) {
    program.stateSet(SSEStateKeys.terminalEvent).forEach((terminalEvent) => {
        if (!("union" in terminalEvent)) {
            return;
        }
        validateTerminalEvent(program, terminalEvent);
    });
}
export function validateTerminalEvent(program, target) {
    // Check that the union is decorated with `@TypeSpec.Events.events`.
    if (!isEvents(program, target.union)) {
        reportDiagnostic(program, {
            code: "terminal-event-not-in-events",
            target,
        });
    }
}
//# sourceMappingURL=validate.js.map