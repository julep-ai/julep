<sup>English | [ä¸­æ–‡ç¿»è¯‘](https://github.com/julep-ai/julep/blob/dev/README-CN.md) | [æ—¥æœ¬èªç¿»è¨³](https://github.com/julep-ai/julep/blob/dev/README-JP.md)</sup><div align="center">
 <img src="https://socialify.git.ci/julep-ai/julep/image?description=1&descriptionEditable=API%20for%20AI%20agents%20and%20multi-step%20tasks&forks=1&name=1&owner=1&pattern=Solid&stargazers=1&font=Source%20Code%20Pro&logo=https%3A%2F%2Fraw.githubusercontent.com%2Fjulep-ai%2Fjulep%2Fdev%2F.github%2Fjulep-logo.svg&theme=Auto" alt="julep" width="640" height="320" />
</div>
<p align="center">
  <br />
  <a href="https://docs.julep.ai" rel="dofollow"><strong>Explore Docs</strong></a>
  Â·
  <a href="https://discord.com/invite/JTSBGRZrzj" rel="dofollow">Discord</a>
  Â·
  <a href="https://x.com/julep_ai" rel="dofollow">ğ•</a>
  Â·
  <a href="https://www.linkedin.com/company/julep-ai" rel="dofollow">LinkedIn</a>
</p>
<p align="center">
    <a href="https://www.npmjs.com/package/@julep/sdk"><img src="https://img.shields.io/npm/v/%40julep%2Fsdk?style=social&amp;logo=npm&amp;link=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F%40julep%2Fsdk" alt="NPM Version"></a>
    <span>&nbsp;</span>
    <a href="https://pypi.org/project/julep"><img src="https://img.shields.io/pypi/v/julep?style=social&amp;logo=python&amp;label=PyPI&amp;link=https%3A%2F%2Fpypi.org%2Fproject%2Fjulep" alt="PyPI - Version"></a>
    <span>&nbsp;</span>
    <a href="https://hub.docker.com/u/julepai"><img src="https://img.shields.io/docker/v/julepai/agents-api?sort=semver&amp;style=social&amp;logo=docker&amp;link=https%3A%2F%2Fhub.docker.com%2Fu%2Fjulepai" alt="Docker Image Version"></a>
    <span>&nbsp;</span>
    <a href="https://choosealicense.com/licenses/apache/"><img src="https://img.shields.io/github/license/julep-ai/julep" alt="GitHub License"></a>
</p>
[!NOTE]
ğŸ‘¨â€ğŸ’» Here for the devfest.ai event? Join our [Discord](https://discord.com/invite/JTSBGRZrzj) and check out the details below.<details>
<summary><b>ğŸŒŸ Contributors and DevFest.AI Participants</b> (Click to expand)</summary>
ğŸŒŸ æ‹›å‹Ÿè´¡çŒ®è€…ï¼æˆ‘ä»¬å¾ˆé«˜å…´æ¬¢è¿æ–°è´¡çŒ®è€…åŠ å…¥ Julep é¡¹ç›®ï¼æˆ‘ä»¬åˆ›å»ºäº†å‡ ä¸ªâ€œå¥½çš„ç¬¬ä¸€ä¸ªé—®é¢˜â€æ¥å¸®åŠ©æ‚¨å…¥é—¨ã€‚ä»¥ä¸‹æ˜¯æ‚¨å¯ä»¥åšå‡ºè´¡çŒ®çš„æ–¹å¼ï¼šCheck out our [CONTRIBUTING.md](CONTRIBUTING.md) file for guidelines on how to contribute.Browse our [good first issues](https://github.com/julep-ai/julep/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22) to find a task that interests you.If you have any questions or need help, don't hesitate to reach out on our [Discord](https://discord.com/invite/JTSBGRZrzj) channel.æ‚¨çš„è´¡çŒ®ï¼Œæ— è®ºå¤§å°ï¼Œå¯¹æˆ‘ä»¬æ¥è¯´éƒ½æ˜¯å®è´µçš„ã€‚è®©æˆ‘ä»¬ä¸€èµ·åˆ›é€ ä¸€äº›äº†ä¸èµ·çš„ä¸œè¥¿ï¼ğŸš€ğŸ‰ DevFest.AI 2024 å¹´ 10 æœˆä»¤äººå…´å¥‹çš„æ¶ˆæ¯ï¼æˆ‘ä»¬å°†å‚åŠ  2024 å¹´ 10 æœˆçš„ DevFest.AIï¼ğŸ—“ï¸åœ¨æœ¬æ¬¡æ´»åŠ¨æœŸé—´ä¸º Julep åšå‡ºè´¡çŒ®ï¼Œå°±æœ‰æœºä¼šèµ¢å¾—è¶…æ£’çš„ Julep å•†å“å’Œèµƒç‰©ï¼ğŸä¸æ¥è‡ªä¸–ç•Œå„åœ°çš„å¼€å‘äººå‘˜ä¸€èµ·ä¸º AI èµ„æºåº“åšå‡ºè´¡çŒ®å¹¶å‚ä¸ç²¾å½©çš„æ´»åŠ¨ã€‚éå¸¸æ„Ÿè°¢ DevFest.AI ç»„ç»‡è¿™æ¬¡ç²¾å½©çš„æ´»åŠ¨ï¼[!TIP]
Ready to join the fun? **[Tweet that you are participating](https://twitter.com/intent/tweet?text=Pumped%20to%20be%20participating%20in%20%40devfestai%20with%20%40julep_ai%20building%20%23ai%20%23agents%20%23workflows%20Let's%20gooo!%20https%3A%2F%2Fgit.new%2Fjulep)** and let's get coding! ğŸ–¥ï¸[!NOTE]
Get your API key [here](https://dashboard-dev.julep.ai).While we are in beta, you can also reach out on [Discord](https://discord.com/invite/JTSBGRZrzj) to get rate limits lifted on your API key.![Julep DevFest.AI](https://media.giphy.com/media/YjyUeyotft6epaMHtU/giphy.gif)</details>
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<details>
<summary><h3>ğŸ“– Table of Contents</h3></summary>

- [Optional: Define the input schema for the task](#optional-define-the-input-schema-for-the-task)
- [Define the tools that the agent can use](#define-the-tools-that-the-agent-can-use)
- [Special variables:](#special-variables)
- [- inputs: for accessing the input to the task](#--inputs-for-accessing-the-input-to-the-task)
- [- outputs: for accessing the output of previous steps](#--outputs-for-accessing-the-output-of-previous-steps)
- [- _: for accessing the output of the previous step](#--_-for-accessing-the-output-of-the-previous-step)
- [Define the main workflow](#define-the-main-workflow)
- [Evaluate the search queries using a simple python expression](#evaluate-the-search-queries-using-a-simple-python-expression)
- [Run the web search in parallel for each query](#run-the-web-search-in-parallel-for-each-query)
- [Collect the results from the web search](#collect-the-results-from-the-web-search)
- [Summarize the results](#summarize-the-results)
- [Send the summary to Discord](#send-the-summary-to-discord)
- [ğŸ› ï¸ Add an image generation tool (DALLÂ·E) to the agent](#-add-an-image-generation-tool-dall%C2%B7e-to-the-agent)
- [Create a task that takes an idea and creates a story and a 4-panel comic strip](#create-a-task-that-takes-an-idea-and-creates-a-story-and-a-4-panel-comic-strip)
- [Step 1: Generate a story and outline into 4 panels](#step-1-generate-a-story-and-outline-into-4-panels)
- [Step 2: Extract theå°ç»„æè¿°å’Œæ•…äº‹evaluate:](#step-2-extract-the%E5%B0%8F%E7%BB%84%E6%8F%8F%E8%BF%B0%E5%92%8C%E6%95%85%E4%BA%8Bevaluate)
    - [Step 3: Execute the Task](#step-3-execute-the-task)

</details>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
ä»‹ç»Julep æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»º AI ä»£ç†çš„å¹³å°ï¼Œè¿™äº›ä»£ç†å¯ä»¥è®°ä½è¿‡å»çš„äº’åŠ¨å¹¶æ‰§è¡Œå¤æ‚çš„ä»»åŠ¡ã€‚å®ƒæä¾›é•¿æœŸè®°å¿†å¹¶ç®¡ç†å¤šæ­¥éª¤æµç¨‹ã€‚Julep æ”¯æŒåˆ›å»ºå¤šæ­¥éª¤ä»»åŠ¡ï¼ŒåŒ…æ‹¬å†³ç­–ã€å¾ªç¯ã€å¹¶è¡Œå¤„ç†ä»¥åŠä¸ä¼—å¤šå¤–éƒ¨å·¥å…·å’Œ API çš„é›†æˆã€‚è™½ç„¶è®¸å¤šäººå·¥æ™ºèƒ½åº”ç”¨ç¨‹åºä»…é™äºç®€å•ã€çº¿æ€§çš„æç¤ºé“¾å’Œ API è°ƒç”¨ï¼Œå¹¶ä¸”åˆ†æ”¯å¾ˆå°‘ï¼Œä½† Julep å¯ä»¥å¤„ç†æ›´å¤æ‚çš„åœºæ™¯ã€‚å®ƒæ”¯æŒï¼šå¤æ‚ã€å¤šæ­¥éª¤çš„æµç¨‹åŠ¨æ€å†³ç­–å¹¶è¡Œæ‰§è¡Œ[!TIP]
Imagine you want to build an AI agent that can do more than just answer simple questionsâ€”it needs to handle complex tasks, remember past interactions, and maybe even use other tools or APIs. That's where Julep comes in.å¿«é€Ÿç¤ºä¾‹æƒ³è±¡ä¸€ä¸‹ä¸€ä¸ªå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œçš„ç ”ç©¶ AI ä»£ç†ï¼šé€‰ä¸€ä¸ªè¯é¢˜ï¼Œé’ˆå¯¹è¯¥ä¸»é¢˜æå‡º 100 ä¸ªæœç´¢æŸ¥è¯¢ï¼ŒåŒæ—¶è¿›è¡Œè¿™äº›ç½‘é¡µæœç´¢ï¼Œæ€»ç»“ç»“æœï¼Œå°†æ‘˜è¦å‘é€è‡³ DiscordIn Julep, this would be a single task under <b>80 lines of code</b> and run <b>fully managed</b> all on its own. All of the steps are executed on Julep's own servers and you don't need to lift a finger. Here's a working example:name: Research Agent

# Optional: Define the input schema for the task
input_schema:
  type: object
  properties:
    topic:
      type: string
      description: The main topic to research

# Define the tools that the agent can use
tools:
- name: web_search
  type: integration
  integration:
    provider: brave
    setup:
      api_key: "YOUR_BRAVE_API_KEY"

- name: discord_webhook
  type: api_call
  api_call:
    url: "YOUR_DISCORD_WEBHOOK_URL"
    method: POST
    headers:
      Content-Type: application/json

# Special variables:
# - inputs: for accessing the input to the task
# - outputs: for accessing the output of previous steps
# - _: for accessing the output of the previous step

# Define the main workflow
main:
- prompt:
    - role: system
      content: >-
        You are a research assistant.
        Generate 100 diverse search queries related to the topic:
        {{inputs[0].topic}}

        Write one query per line.
  unwrap: true

# Evaluate the search queries using a simple python expression
- evaluate:
    search_queries: "_.split('\n')"

# Run the web search in parallel for each query
- over: "_.search_queries"
  map:
    tool: web_search
    arguments:
      query: "_"
  parallelism: 100

# Collect the results from the web search
- evaluate:
    results: "'\n'.join([item.result for item in _])"

# Summarize the results
- prompt:
    - role: system
      content: >
        You are a research summarizer. Create a comprehensive summary of the following research results on the topic {{inputs[0].topic}}.
        The summary should be well-structured, informative, and highlight key findings and insights:
        {{_.results}}
  unwrap: true

# Send the summary to Discord
- tool: discord_webhook
  arguments:
    content: >
      **Research Summary for {{inputs[0].topic}}**

      {{_}}
[!TIP]
Julep is really useful when you want to build AI agents that can maintain context and state over long-term interactions. It's great for designing complex, multi-step workflows and integrating various tools and APIs directly into your agent's processes.åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒJulep å°†è‡ªåŠ¨ç®¡ç†å¹¶è¡Œæ‰§è¡Œï¼Œé‡è¯•å¤±è´¥çš„æ­¥éª¤ï¼Œé‡æ–°å‘é€ API è¯·æ±‚ï¼Œå¹¶ä¿æŒä»»åŠ¡å¯é è¿è¡Œç›´åˆ°å®Œæˆã€‚ä¸»è¦ç‰¹ç‚¹ğŸ§  **Persistent AI Agents**: Remember context and information over long-term interactions.ğŸ’¾ **Stateful Sessions**: Keep track of past interactions for personalized responses.ğŸ”„ **Multi-Step Tasks**: Build complex, multi-step processes with loops and decision-making.â³ **Task Management**: Handle long-running tasks that can run indefinitely.ğŸ› ï¸ **Built-in Tools**: Use built-in tools and external APIs in your tasks.ğŸ”§ **Self-Healing**: Julep will automatically retry failed steps, resend messages, and generally keep your tasks running smoothly.ğŸ“š **RAG**: Use Julep's document store to build a system for retrieviå¹¶ä½¿ç”¨æ‚¨è‡ªå·±çš„æ•°æ®ã€‚Julep éå¸¸é€‚åˆéœ€è¦è¶…è¶Šç®€å•çš„æç¤ºå“åº”æ¨¡å‹çš„ AI ç”¨ä¾‹çš„åº”ç”¨ç¨‹åºã€‚ä¸ºä»€ä¹ˆé€‰æ‹© Julep è€Œä¸æ˜¯ LangChainï¼Ÿä¸åŒçš„ç”¨ä¾‹å¯ä»¥å°† LangChain å’Œ Julep è§†ä¸º AI å¼€å‘å †æ ˆä¸­å…·æœ‰ä¸åŒé‡ç‚¹çš„å·¥å…·ã€‚LangChain éå¸¸é€‚åˆåˆ›å»ºæç¤ºåºåˆ—å’Œç®¡ç†ä¸ AI æ¨¡å‹çš„äº¤äº’ã€‚å®ƒæ‹¥æœ‰åºå¤§çš„ç”Ÿæ€ç³»ç»Ÿï¼ŒåŒ…å«å¤§é‡é¢„æ„å»ºçš„é›†æˆï¼Œå¦‚æœæ‚¨æƒ³å¿«é€Ÿå¯åŠ¨å’Œè¿è¡ŒæŸäº›åŠŸèƒ½ï¼Œè¿™ä¼šéå¸¸æ–¹ä¾¿ã€‚LangChain éå¸¸é€‚åˆæ¶‰åŠçº¿æ€§æç¤ºé“¾å’Œ API è°ƒç”¨çš„ç®€å•ç”¨ä¾‹ã€‚å¦ä¸€æ–¹é¢ï¼ŒJulep æ›´æ³¨é‡æ„å»ºæŒä¹…çš„ AI ä»£ç†ï¼Œè¿™äº›ä»£ç†å¯ä»¥åœ¨é•¿æœŸäº¤äº’â€‹â€‹ä¸­è®°ä½äº‹ç‰©ã€‚å½“æ‚¨éœ€è¦æ¶‰åŠå¤šä¸ªæ­¥éª¤ã€å†³ç­–ä»¥åŠåœ¨ä»£ç†æµç¨‹ä¸­ç›´æ¥ä¸å„ç§å·¥å…·æˆ– API é›†æˆçš„å¤æ‚ä»»åŠ¡æ—¶ï¼Œå®ƒä¼šå¤§æ”¾å¼‚å½©ã€‚å®ƒä»å¤´å¼€å§‹è®¾è®¡ï¼Œä»¥ç®¡ç†æŒä¹…ä¼šè¯å’Œå¤æ‚ä»»åŠ¡ã€‚å¦‚æœæ‚¨æƒ³æ„å»ºä¸€ä¸ªéœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œçš„å¤æ‚ AI åŠ©æ‰‹ï¼Œè¯·ä½¿ç”¨ Julepï¼šè·Ÿè¸ªå‡ å¤©æˆ–å‡ å‘¨å†…çš„ç”¨æˆ·äº’åŠ¨ã€‚æ‰§è¡Œè®¡åˆ’ä»»åŠ¡ï¼Œä¾‹å¦‚å‘é€æ¯æ—¥æ‘˜è¦æˆ–ç›‘æ§æ•°æ®æºã€‚æ ¹æ®ä¹‹å‰çš„äº’åŠ¨æˆ–å­˜å‚¨çš„æ•°æ®åšå‡ºå†³ç­–ã€‚ä½œä¸ºå…¶ä»»åŠ¡çš„ä¸€éƒ¨åˆ†ï¼Œä¸å¤šä¸ªå¤–éƒ¨æœåŠ¡è¿›è¡Œäº¤äº’ã€‚ç„¶å Julep æä¾›æ”¯æŒæ‰€æœ‰è¿™äº›çš„åŸºç¡€è®¾æ–½ï¼Œè€Œæ— éœ€æ‚¨ä»å¤´å¼€å§‹æ„å»ºã€‚ä¸åŒçš„å¤–å½¢å°ºå¯¸Julep is a **platform** that includes a language for describing tasks, a server for running those tasks, and an SDK for interacting with the platform. To build something with Julep, you write a description of the task in `YAML`, and then run the task in the cloud.Julep ä¸“ä¸ºç¹é‡ã€å¤šæ­¥éª¤å’Œé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡è€Œè®¾è®¡ï¼Œå¹¶ä¸”å¯¹ä»»åŠ¡çš„å¤æ‚ç¨‹åº¦æ²¡æœ‰é™åˆ¶ã€‚LangChain is a **library** that includes a few tools and a framework for building linear chains of prompts and tools. To build something with LangChain, you typically write Python code that configures and runs the model chains you want to use.å¯¹äºæ¶‰åŠçº¿æ€§æç¤ºå’Œ API è°ƒç”¨é“¾çš„ç®€å•ç”¨ä¾‹ï¼ŒLangChain å¯èƒ½è¶³å¤Ÿå¹¶ä¸”èƒ½å¤Ÿæ›´å¿«åœ°å®ç°ã€‚æ€»ä¹‹å½“æ‚¨éœ€è¦åœ¨æ— çŠ¶æ€æˆ–çŸ­æœŸç¯å¢ƒä¸­ç®¡ç† AI æ¨¡å‹äº¤äº’å’Œæç¤ºåºåˆ—æ—¶ï¼Œè¯·ä½¿ç”¨ LangChainã€‚å½“æ‚¨éœ€è¦ä¸€ä¸ªå…·æœ‰é«˜çº§ä»»åŠ¡åŠŸèƒ½ã€æŒä¹…ä¼šè¯å’Œå¤æ‚ä»»åŠ¡ç®¡ç†çš„çŠ¶æ€ä»£ç†çš„å¼ºå¤§æ¡†æ¶æ—¶ï¼Œè¯·é€‰æ‹© Julepã€‚å®‰è£…To get started with Julep, install it using [npm](https://www.npmjs.com/package/@julep/sdk) or [pip](https://pypi.org/project/julep/):npm install @julep/sdk
æˆ–è€…pip install julep
[!NOTE]
Get your API key [here](https://dashboard-dev.julep.ai).While we are in beta, you can also reach out on [Discord](https://discord.com/invite/JTSBGRZrzj) to get rate limits lifted on your API key.[!TIP]
ğŸ’» Are you a _show me the code!â„¢_ kind of person? We have created a ton of cookbooks for you to get started with. **Check out the [cookbooks](https://github.com/julep-ai/julep/tree/dev/cookbooks)** to browse through examples.ğŸ’¡ There's also lots of ideas that you can build on top of Julep. **Check out the [list of ideas](https://github.com/julep-ai/julep/tree/dev/cookbooks/IDEAS.md)** to get some inspiration.Python å¿«é€Ÿå…¥é—¨ğŸæ­¥éª¤ 1ï¼šåˆ›å»ºä»£ç†import yaml
from julep import Julep # or AsyncJulep

client = Julep(api_key="your_julep_api_key")

agent = client.agents.create(
    name="Storytelling Agent",
    model="gpt-4o",
    about="You are a creative storytelling agent that can craft engaging stories and generate comic panels based on ideas.",
)

# ğŸ› ï¸ Add an image generation tool (DALLÂ·E) to the agent
client.agents.tools.create(
    agent_id=agent.id,
    name="image_generator",
    description="Use this tool to generate images based on descriptions.",
    integration={
        "provider": "dalle",
        "method": "generate_image",
        "setup": {
            "api_key": "your_openai_api_key",
        },
    },
)
æ­¥éª¤ 2ï¼šåˆ›å»ºç”Ÿæˆæ•…äº‹å’Œæ¼«ç”»çš„ä»»åŠ¡è®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå¤šæ­¥éª¤ä»»åŠ¡æ¥åˆ›å»ºä¸€ä¸ªæ•…äº‹å¹¶æ ¹æ®è¾“å…¥çš„æƒ³æ³•ç”Ÿæˆé¢æ¿æ¼«ç”»ï¼š# ğŸ“‹ Task
# Create a task that takes an idea and creates a story and a 4-panel comic strip
task_yaml = """
name: Story and Comic Creator
description: Create a story based on an idea and generate a 4-panel comic strip illustrating the story.

main:
  # Step 1: Generate a story and outline into 4 panels
  - prompt:
      - role: system
        content: You are {{agent.name}}. {{agent.about}}
      - role: user
        content: >
          Based on the idea '{{_.idea}}', write a short story suitable for a 4-panel comic strip.
          Provide the story and a numbered list of 4 brief descriptions for each panel illustrating key moments in the story.
    unwrap: true

  # Step 2: Extract theå°ç»„æè¿°å’Œæ•…äº‹evaluate:
  story: _.split('1. ')[0].strip()
  panels: re.findall(r'\\d+\\.\\s*(.*?)(?=\\d+\\.\\s*|$)', _)æ­¥éª¤ 3ï¼šä½¿ç”¨å›¾åƒç”Ÿæˆå™¨å·¥å…·ä¸ºæ¯ä¸ªé¢æ¿ç”Ÿæˆå›¾åƒforeach:
  in: _.panels
  do:
    tool: image_generator
    arguments:
      description: _æ­¥éª¤ 4ï¼šä¸ºæ•…äº‹æƒ³ä¸€ä¸ªå¸å¼•äººçš„æ ‡é¢˜è¿…é€Ÿçš„ï¼šrole: system
content: You are {{agent.name}}. {{agent.about}}role: user
content: >
  Based on the story below, generate a catchy title.Story: {{outputs[1].story}}
unwrap: trueæ­¥éª¤ 5ï¼šè¿”å›æ•…äº‹ã€ç”Ÿæˆçš„å›¾åƒå’Œæ ‡é¢˜return:
  title: outputs[3]
  story: outputs[1].story
  comic_panels: "[output.image.url for output in outputs[2]]"
"""task = client.tasks.create(
    agent_id=agent.id,
    **yaml.safe_load(task_yaml)
)
### Step 3: Execute the Task

```python
# ğŸš€ Execute the task with an input idea
execution = client.executions.create(
    task_id=task.id,
    input={"idea": "A cat who learns to fly"}
)

# ğŸ‰ Watch as the story and comic panels are generated
for transition in client.executions.transitions.stream(execution_id=execution.id):
    print(transition)

# ğŸ“¦ Once the execution is finished, retrieve the results
result = client.executions.get(execution_id=execution.id)
æ­¥éª¤ 4ï¼šä¸ä»£ç†èŠå¤©å¼€å§‹ä¸ä»£ç†è¿›è¡Œäº¤äº’å¼èŠå¤©ä¼šè¯ï¼šsession = client.sessions.create(agent_id=agent.id)

# ğŸ’¬ Send messages to the agent
while (message := input("Enter a message: ")) != "quit":
    response = client.sessions.chat(
        session_id=session.id,
        message=message,
    )

    print(response)
[!TIP]
You can find the full python example [here](example.py).Node.js å¿«é€Ÿå…¥é—¨ğŸŸ©æ­¥éª¤ 1ï¼šåˆ›å»ºä»£ç†import { Julep } from '@julep/sdk';
import yaml from 'js-yaml';

const client = new Julep({ apiKey: 'your_julep_api_key' });

async function createAgent() {
  const agent = await client.agents.create({
    name: "Storytelling Agent",
    model: "gpt-4",
    about: "You are a creative storytelling agent that can craft engaging stories and generate comic panels based on ideas.",
  });

  // ğŸ› ï¸ Add an image generation tool (DALLÂ·E) to the agent
  await client.agents.tools.create(agent.id, {
    name: "image_generator",
    description: "Use this tool to generate images based on descriptions.",
    integration: {
      provider: "dalle",
      method: "generate_image",
      setup: {
        api_key: "your_openai_api_key",
      },
    },
  });

  return agent;
}
æ­¥éª¤ 2ï¼šåˆ›å»ºç”Ÿæˆæ•…äº‹å’Œæ¼«ç”»çš„ä»»åŠ¡const taskYaml = `
name: Story and Comic Creator
description: Create a story based on an idea and generate a 4-panel comic strip illustrating the story.

main:
  # Step 1: Generate a story and outline into 4 panels
  - prompt:
      - role: system
        content: You are {{agent.name}}. {{agent.about}}
      - role: user
        content: >
          Based on the idea '{{_.idea}}', write a short story suitable for a 4-panel comic strip.
          Provide the story and a numbered list of 4 brief descriptions for each panel illustrating key moments in the story.
    unwrap: true

  # Step 2: Extract the panel descriptions and story
  - evaluate:
      story: _.split('1. ')[0].trim()
      panels: _.match(/\\d+\\.\\s*(.*?)(?=\\d+\\.\\s*|$)/g)

  # Step 3: Generate images for each panel using the image generator tool
  - foreach:
      in: _.panels
      do:
        tool: image_generator
        arguments:
          description: _

  # Step 4: Generate a catchy title for the story
  - prompt:
      - role: system
        content: You are {{agent.name}}. {{agent.about}}
      - role: user
        content: >
          Based on the story below, generate a catchy title.

          Story: {{outputs[1].story}}
    unwrap: true

  # Step 5: Return the story, the generated images, and the title
  - return:
      title: outputs[3]
      story: outputs[1].story
      comic_panels: outputs[2].map(output => output.image.url)
`;

async function createTask(agent) {
  const task = await client.tasks.create(agent.id, yaml.load(taskYaml));
  return task;
}
æ­¥éª¤ 3ï¼šæ‰§è¡Œä»»åŠ¡async function executeTask(task) {
  const execution = await client.executions.create(task.id, {
    input: { idea: "A cat who learns to fly" }
  });

  // ğŸ‰ Watch as the story and comic panels are generated
  for await (const transition of client.executions.transitions.stream(execution.id)) {
    console.log(transition);
  }

  // ğŸ“¦ Once the execution is finished, retrieve the results
  const result = await client.executions.get(execution.id);
  return result;
}
æ­¥éª¤ 4ï¼šä¸ä»£ç†èŠå¤©async function chatWithAgent(agent) {
  const session = await client.sessions.create({ agent_id: agent.id });

  // ğŸ’¬Send messages to the agent
  const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
  });const chat = async () => {
    rl.question("Enter a message (or 'quit' to exit): ", async (message) => {
      if (message.toLowerCase() === 'quit') {
        rl.close();
        return;
      }  const response = await client.sessions.chat(session.id, { message });
  console.log(response);
  chat();
});
};chat();
}// Run the example
async function runExample() {
  const agent = await createAgent();
  const task = await createTask(agent);
  const result = await executeTask(task);
  console.log("Task Result:", result);
  await chatWithAgent(agent);
}è¿è¡Œç¤ºä¾‹()ã€‚æ•è·(æ§åˆ¶å°.é”™è¯¯);
> [!TIP]
> You can find the full Node.js example [here](example.js).

## Components

Julep is made up of the following components:

- **Julep Platform**: The Julep platform is a cloud service that runs your workflows. It includes a language for describing workflows, a server for running those workflows, and an SDK for interacting with the platform.
- **Julep SDKs**: Julep SDKs are a set of libraries for building workflows. There are SDKs for Python and JavaScript, with more on the way.
- **Julep API**: The Julep API is a RESTful API that you can use to interact with the Julep platform.

### Mental Model

<div align="center">
  <img src="https://github.com/user-attachments/assets/38420b5d-9342-4c8d-bae9-b47c28ae45af" height="360" />
</div>

Think of Julep as a platform that combines both client-side and server-side components to help you build advanced AI agents. Here's how to visualize it:

1. **Your Application Code:**
   - You use the Julep SDK in your application to define agents, tasks, and workflows.
   - The SDK provides functions and classes that make it easy to set up and manage these components.

2. **Julep Backend Service:**
   - The SDK communicates with the Julep backend over the network.
   - The backend handles execution of tasks, maintains session state, stores documents, and orchestrates workflows.

3. **Integration with Tools and APIs:**
   - Within your workflows, you can integrate external tools and services.
   - The backend facilitates these integrations, so your agents can, for example, perform web searches, access databases, or call third-party APIs.

In simpler terms:
- Julep is a platform for building stateful AI agents.
- You use the SDK (like a toolkit) in your code to define what your agents do.
- The backend service (which you can think of as the engine) runs these definitions, manages state, and handles complexity.

## Concepts

Julep is built on several key technical components that work together to create powerful AI workflows:

```mermaid
graph TD
    User[User] ==> Session[Session]
    Session --> Agent[Agent]
    Agent --> Tasks[Tasks]
    Agent --> LLM[Large Language Model]
    Tasks --> Tools[Tools]
    Agent --> Documents[Documents]
    Documents --> VectorDB[Vector Database]
    Tasks --> Executions[Executions]

    classDef client fill:#9ff,stroke:#333,stroke-width:1px;
    class User client;

    classDef core fill:#f9f,stroke:#333,stroke-width:2px;
    class Agent,Tasks,Session core;
**Agents**: AI-powered entities backed by large language models (LLMs) that execute tasks and interact with users.**Users**: Entities that interact with agents through sessions.**Sessions**: Stateful interactions between agents and users, maintaining context across multiple exchanges.**Tasks**: Multi-step, programmatic workflows that agents can execute, including various types of steps like prompts, tool calls, and conditional logic.**Tools**: Integrations that extend an agent's capabilities, including user-defined functions, system tools, or third-party API integrations.**Documents**: Text or data objects associated with agents or users, vectorized and stored for semantic search and retrieval.**Executions**: Instances of tasks that have been initiated with specific inputs, with their own lifecycle and state machine.For a more detailed explanation of these concepts and their interactions, please refer to our [Concepts Documentation](https://github.com/julep-ai/julep/blob/dev/docs/julep-concepts.md).ç†è§£ä»»åŠ¡ä»»åŠ¡æ˜¯ Julep å·¥ä½œæµç³»ç»Ÿçš„æ ¸å¿ƒã€‚å®ƒä»¬å…è®¸æ‚¨å®šä¹‰ä»£ç†å¯ä»¥æ‰§è¡Œçš„å¤æ‚ã€å¤šæ­¥éª¤ AI å·¥ä½œæµã€‚ä»¥ä¸‹æ˜¯ä»»åŠ¡ç»„ä»¶çš„ç®€è¦æ¦‚è¿°ï¼š**Name and Description**: Each task has a unique name and description for easy identification.**Main Steps**: The core of a task, defining the sequence of actions to be performed.**Tools**: Optional integrations that extend the capabilities of your agent during task execution.å·¥ä½œæµæ­¥éª¤çš„ç±»å‹Julep ä¸­çš„ä»»åŠ¡å¯ä»¥åŒ…å«å„ç§ç±»å‹çš„æ­¥éª¤ï¼Œè®©æ‚¨å¯ä»¥åˆ›å»ºå¤æ‚è€Œå¼ºå¤§çš„å·¥ä½œæµç¨‹ã€‚ä»¥ä¸‹æ˜¯æŒ‰ç±»åˆ«ç»„ç»‡çš„å¯ç”¨æ­¥éª¤ç±»å‹çš„æ¦‚è¿°ï¼šå¸¸è§æ­¥éª¤**Prompt**: Sendå‘ AI æ¨¡å‹å‘é€æ¶ˆæ¯å¹¶æ¥æ”¶å“åº”ã€‚- prompt: "Analyze the following data: {{data}}"
**Tool Call**: Execute an integrated tool or API.- tool: web_search
  arguments:
    query: "Latest AI developments"
**Evaluate**: Perform calculations or manipulate data.- evaluate:
    average_score: "sum(scores) / len(scores)"
**Wait for Input**: Pause workflow until input is received.- wait_for_input:
    info:
      message: "Please provide additional information."
**Log**: Log a specified value or message.- log: "Processing completed for item {{item_id}}"
å…³é”®å€¼æ­¥éª¤**Get**: Retrieve a value from a key-value store.- get: "user_preference"
**Set**: Assign a value to a key in a key-value store.- set:
    user_preference: "dark_mode"
è¿­ä»£æ­¥éª¤**Foreach**: Iterate over a collection and perform steps for each item.- foreach:
    in: "data_list"
    do:
      - log: "Processing item {{_}}"
**Map-Reduce**: Map over a collection and reduce the results.- map_reduce:
    over: "numbers"
    map:
      - evaluate:
          squared: "_ ** 2"
    reduce: "sum(results)"
**Parallel**: Run multiple steps in parallel.- parallel:
    - tool: web_search
      arguments:
        query: "AI news"
    - tool: weather_check
      arguments:
        location: "New York"
æ¡ä»¶æ­¥éª¤**If-Else**: Conditional execution of steps.- if: "score > 0.8"
  then:
    - log: "High score achieved"
  else:
    - log: "Score needs improvement"
**Switch**: Execute steps based on multiple conditions.- switch:
    - case: "category == 'A'"
      then:
        - log: "Category A processing"
    - case: "category == 'B'"
      then:
        - log: "Category B processing"
    - case: "_"  # Default case
      then:
        - log: "Unknown category"
å…¶ä»–æ§åˆ¶æµ**Sleep**: Pause the workflow for a specified duration.- sleep:
    seconds: 30
**Return**: Return a value from the workflow.- return:
    result: "Task completed successfully"
**Yield**: Run a subworkflow and await its completion.- yield:
    workflow: "data_processing_subflow"
    arguments:
      input_data: "{{raw_data}}"
**Error**: Handle errors by specifying an error message.- error: "Invalid input provided"
æ¯ç§æ­¥éª¤ç±»å‹åœ¨æ„å»ºå¤æ‚çš„ AI å·¥ä½œæµä¸­éƒ½æœ‰ç‰¹å®šçš„ç”¨é€”ã€‚æ­¤åˆ†ç±»æœ‰åŠ©äºç†è§£ Julep ä»»åŠ¡ä¸­å¯ç”¨çš„å„ç§æ§åˆ¶æµç¨‹å’Œæ“ä½œã€‚é«˜çº§åŠŸèƒ½Julep æä¾›ä¸€ç³»åˆ—é«˜çº§åŠŸèƒ½æ¥å¢å¼ºæ‚¨çš„ AI å·¥ä½œæµç¨‹ï¼šä¸ºä»£ç†æ·»åŠ å·¥å…·é€šè¿‡é›†æˆå¤–éƒ¨å·¥å…·å’Œ API æ¥æ‰©å±•ä»£ç†çš„åŠŸèƒ½ï¼šclient.agents.tools.create(
    agent_id=agent.id,
    name="web_search",
    description="Search the web for information.",
    integration={
        "provider": "brave",
        "method": "search",
        "setup": {"api_key": "your_brave_api_key"},
    },
)
ç®¡ç†ä¼šè¯å’Œç”¨æˆ·Julep ä¸ºæŒä¹…äº¤äº’æä¾›äº†å¼ºå¤§çš„ä¼šè¯ç®¡ç†ï¼šsession = client.sessions.create(
    agent_id=agent.id,
    user_id=user.id,
    context_overflow="adaptive"
)

# Continue conversation in the same session
response = client.sessions.chat(
    session_id=session.id,
    messages=[
      {
        "role": "user",
        "content": "Follow up on the previous conversation."
      }
    ]
)
æ–‡æ¡£é›†æˆä¸æœç´¢è½»æ¾ç®¡ç†å’Œæœç´¢ä»£ç†çš„æ–‡æ¡£ï¼š# Upload a document
document = client.agents.docs.create(
    title="AI advancements",
    content="AI is changing the world...",
    metadata={"category": "research_paper"}
)

# Search documents
results = client.agents.docs.search(
    text="AI advancements",
    metadata_filter={"category": "research_paper"}
)
For more advanced features and detailed usage, please refer to our [Advanced Features Documentation](https://docs.julep.ai/advanced-features).é›†æˆJulep æ”¯æŒå„ç§é›†æˆï¼Œå¯ä»¥æ‰©å±•æ‚¨çš„ AI ä»£ç†çš„åŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯å¯ç”¨é›†æˆåŠå…¶æ”¯æŒçš„å‚æ•°çš„åˆ—è¡¨ï¼šå‹‡æ•¢æœç´¢setup:
  api_key: string  # The API key for Brave Search

arguments:
  query: string  # The search query for searching with Brave

output:
  result: string  # The result of the Brave Search
æµè§ˆå™¨åŸºç¡€setup:
  api_key: string       # The API key for BrowserBase
  project_id: string    # The project ID for BrowserBase
  session_id: string    # (Optional) The session ID for BrowserBasearguments:
  urls: list[string]    # The URLs for loading with BrowserBaseoutput:
  documents: list       # The documents loaded from the URLs
### Email

```yaml
setup:
  host: string      # The host of the email server
  port: integer     # The port of the email server
  user: string      # The username of the email server
  password: string  # The password of the email server

arguments:
  to: string        # The email address to send the email to
  from: string      # The email address to send the email from
  subject: string   # The subject of the email
  body: string      # The body of the email

output:
  success: boolean  # Whether the email was sent successfully
èœ˜è››setup:
  spider_api_key: string  # The API key for Spider

arguments:
  url: string             # The URL for which to fetch data
  mode: string            # The type of crawlers (default: "scrape")
  params: dict            # (Optional) The parameters for the Spider API

output:
  documents: list         # The documents returned from the spider
å¤©æ°”setup:
  openweathermap_api_key: string  # The API key for OpenWeatherMap

arguments:
  location: string                # The location for which to fetch weather data

output:
  result: string                  # The weather data for the specified location
ç»´åŸºç™¾ç§‘arguments:
  query: string           # The search query string
  load_max_docs: integer  # Maximum number of documents to load (default: 2)

output:
  documents: list         # The documents returned from the Wikipedia search
These integrations can be used within your tasks to extend the capabilities of your AI agents. For more detailed information on how to use these integrations in your workflows, please refer to our [Integrations Documentation](https://docs.julep.ai/integrations).SDK å‚è€ƒ[Node.js SDK](https://github.com/julep-ai/node-sdk/blob/main/api.md)[Python SDK](https://github.com/julep-ai/python-sdk/blob/main/api.md)API å‚è€ƒæµè§ˆæˆ‘ä»¬å…¨é¢çš„ API æ–‡æ¡£ï¼Œä»¥äº†è§£æœ‰å…³ä»£ç†ã€ä»»åŠ¡å’Œæ‰§è¡Œçš„æ›´å¤šä¿¡æ¯ï¼š[Agents API](https://api.julep.ai/api/docs#tag/agents)[Tasks API](https://api.julep.ai/api/docs#tag/tasks)[Executions API](https://api.julep.ai/api/docs#tag/executions)->> Test <<-
A simple update to text the translation github action